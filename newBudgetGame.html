<!doctype html>
<head>
<title> Budget Game </title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script type="text/javascript">
	function startSimulation() {
		document.getElementById("age").disabled = "true";
		document.getElementById("monthlyPayment").disabled = "true";
		document.getElementById("loanLength").disabled = "true";
		
		//calculate amount of money taken out of salary for taxes
		var grossSal = document.getElementById("salary").value;
		var stateTax = document.getElementById("tax").value;
		var statePercent;
		if (stateTax === "0") {
			statePercent = 0;
		}
		else {
			statePercent = Number(stateTax)/100;
		}
		var taxValue;
		if (Number(grossSal) < 9525) {
			taxValue = grossSal*(.1+statePercent);
		}
		else if (Number(grossSal) < 38700) {
			taxValue = grossSal*(.12+statePercent);
		}
		else if (Number(grossSal) < 82500) {
			taxValue = grossSal*(.22+statePercent);
		}
		else if (Number(grossSal) < 157500) {
			taxValue = grossSal*(.24+statePercent);
		}
		else if (Number(grossSal) < 200000) {
			taxValue = grossSal*(.32+statePercent);
		}
		else if (Number(grossSal) < 500000) {
			taxValue = grossSal*(.35+statePercent);
		}
		else {
			taxValue = grossSal*(.37+statePercent);
		}
		
		// calculate amount taken out for retirement
		var retire = document.getElementById("retirement");
		var savings;
		savings = Number(retire)*Number(grossSal);
		
		//calculate yearly rent
		var rent = Number(document.getElementById("rent"));
		var yearlyRent;
		yearlyRent = rent*12;
		
		//loop to add rows to the table
		var startingAge = document.getElementById("age").value;
		var simLength = document.getElementById("simLength").value;
		var endAge = Number(startingAge) + Number(simLength);
		var age;
		while (endAge > Number(startingAge)) {
			//calculate yearly loan payments
			var loanPymt = document.getElementById("monthlyPayment").value;
			var loanLen = document.getElementById("loanLength").value;
			var yearLoan;
			var loanInt;

			if (loanPymt === "0" || loanLen === "0") {
				yearLoan = 0;
			}
			else {
				if (loanLen > 11) {
					yearLoan = loanPymt*12;
					loanInt = loanLen - 12;
					document.getElementById("loanLength").value = loanInt;
				}
				else {
					yearLoan = loanPymt*loanLen;
					document.getElementById("loanLength").value = 0;
					document.getElementById("monthlyPayment").value = 0;
				}
			}
			appendTable();
			age = startingAge + 1;
			startingAge = age;
		}
		
			
		
	};
	
	function appendTable() {
		var table = document.getElementById("table");
		var row = table.insertRow(-1);
		var ageCell = row.insertCell(0);
		var incomeCell = row.insertCell(1);
		var taxCell = row.insertCell(2);
		var loanCell = row.insertCell(3);
		var rentCell = row.insertCell(4);
		//var otherCell = row.insertCell(5);
		var retireCell = row.insertCell(5);
		ageCell.innerHTML = startingAge;
		incomeCell.innerHTML = Number(document.getElementById("salary").value);
		taxCell.innerHTML = taxValue;
		loanCell.innerHTML = yearLoan;
		rentCell.innerHTML = yearlyRent;
		retireCell.innerHTML = savings;
	};
	
	function resetSimulation() {
		document.getElementById("age").disabled = "false";
		document.getElementById("monthlyPayment").disabled = "false";
		document.getElementById("loanLength").disabled = "false";
		
		document.getElementById("age").value = "";
		document.getElementById("monthlyPayment").value = "";
		document.getElementById("monthlyPayment").value = "";
		document.getElementById("salary").value = "";
		document.getElementById("rent").value = "";
		document.getElementById("retirement").value = "";
		
		//delete table data
		for (var i = table.rows.length - 1; i > 0; i--) {
			table.deleteRow(i);
		}
	};

</script>	
<style> 
	body{
		background-color: rgb(255,255,204);
	}
	table {  
	    color: #333;
	    font-family: Helvetica, Arial, sans-serif;
	    width: 640px; 
	    border-collapse: 
	    collapse; border-spacing: 0; 
	}
	td, th {  
	    border: 1px solid transparent; /* No more visible border */
	    height: 30px; 
	    transition: all 0.3s;  /* Simple transition for hover effect */
	}
	th {  
	    background: #DFDFDF;  /* Darken header a bit */
	    font-weight: bold;
		text-align: center;
	}
	td {  
	    background: #FAFAFA;
	    text-align: center;
	}
	/* Cells in even rows (2,4,6...) are one color */        
	tr:nth-child(even) td { background: #FEFEFE; }   
	/* Cells in odd rows (1,3,5...) are another (excludes header cells)  */        
	tr:nth-child(odd) td { background: #FEFEFE; }  
	tr td:hover { background: #666; color: #FFF; }  
	/* Hover cell effect! */
	.buttonRow {
		text-align: center;
		justify-content: space-around;
		/*min-width:45em;
		padding: 1.2em 1em 0;
		box-shadow:0 0 5px;
		margin:1em;
		border-radius:0.25em;
		*/
	</style>
</head>
<body>
<br>
<br>
<center><h1> Budget Game </h1></center>
<br>
<br> 
<h2> Rules to the game </h2>
<ul>
	<li> Set your age, salary, cost of living and see what age you might be able to retire at. </li>
		<ul>
			<li> You can change your salary, income tax, retirement savings, or rent at any time </li>
			<li> Watch your savings and spending change on a 5, 10, or 20 time schedule </li>
			</ul>
	<li> If you are unsure of a typical value, click the buttons below to explore these topics more</li>
</ul> 
<br>
<div class="container" style="margin-bottom: 0px;">
<div class="row">
	<div class="buttonRow">
	<button onclick="parent.open('https://www.bls.gov/ooh/')"> Salary </button>
	<button onclick="parent.open('https://sikadm.github.io/loancalc.html')"> Loan Calculator </button>
	<button onclick="parent.open('https://smartasset.com/retirement/retirement-calculator')"> Retirement Calculator </button>
	<button onclick="parent.open('https://files.taxfoundation.org/20180315171940/PIT-011.png')"> State Income Tax </button>
	<button onclick="parent.open('https://www.nerdwallet.com/cost-of-living-calculator')"> Average Rent </button>
	</div>
</div>
	<br>
	<br>
<div class="row">
<div class="col">
<br>
<br>
What is your age? <br>
<input type="text" id="age">
<br>
<br>
How much will you make? 
(yearly salary before taxes) <br>
<input type="text" id="salary">
<br>
<br>
What is your state's income tax rate? <br>
<input type="text" id="tax">
<br>
<br>
How much will you have in loans? (monthly payment and number of months) <br>
<input type="text" id="monthlyPayment">
<input type="text" id="loanLength">
<br>
<br>
How much is rent? <br>
<input type="text" id="rent">
<br>
<br>
What percent of your salary are you saving for retirement? <br>
<input type="text" id="retirement">
<br>
<br>
<p>
Length of Simulation:
<select id="simLength">
<option value="1"> 1 year </option>
<option value="5"> 5 years </option>
<option value="10"> 10 years </option>
<option value="20"> 20 years </option>
</select>
</p>
<button onclick="startSimulation()"> Start Simulation </button>
<br>
<br>
<button onclick="resetSimulation()"> Reset Simulation </button>
<p id="array"> </p>
</div>
<div class="col">
<div id="spendingTable">
	<table id="table">
		<tr>
			<th>Age</th>
			<th>Income</th>
			<th>Taxes</th>
			<th>Loans</th>
			<th>Housing</th>
			<th>Retirement</th>
		</tr>  
	</table>
</div>
</div>
</div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>



	
